{"ast":null,"code":"import _classCallCheck from \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/src/components/Transactions/TransactionList.js\";\nimport _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TransactionItem from \"./TransactionItem\";\nimport Spinner from \"../Spinner\";\nimport { fetchTransactions } from \"../../actions\";\nimport Pagination from \"../Pagination\";\nimport requireAuth from \"../../requireAuth\"; // DON'T FORGET TO SPECIFY THIS. WHEN CALLING FUNCTIONS\n\nvar direction = \"asc\";\n\nvar TransactionList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TransactionList, _Component);\n\n  function TransactionList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TransactionList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TransactionList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      currentTransactions: [],\n      currentPage: null,\n      totalPages: null\n    };\n\n    _this.onPageChanged = function (data) {\n      var transactions = _this.props.transactions;\n      var currentPage = data.currentPage,\n          totalPages = data.totalPages,\n          pageLimit = data.pageLimit; //The offset value indicates the starting index for fetching the records for the current page. Using (currentPage - 1) ensures that the offset is zero-based.\n\n      var offset = (currentPage - 1) * pageLimit; // We use the Array.prototype.slice() method to extract the required chunk of records from allCountries by passing the offset as the starting index for the slice\n      // and (offset + pageLimit) as the index before which to end the slice.\n\n      var currentTransactions = transactions.slice(offset, offset + pageLimit);\n\n      _this.setState({\n        currentPage: currentPage,\n        currentTransactions: currentTransactions,\n        totalPages: totalPages\n      });\n    };\n\n    _this.handleSort = function (key) {\n      var changeDirection = function changeDirection() {\n        if (direction === \"asc\") {\n          direction = \"desc\";\n        } else if (direction === \"desc\") {\n          direction = \"asc\";\n          return;\n        }\n      };\n\n      changeDirection();\n      var currentTransactions = _this.state.currentTransactions;\n\n      var sortedArray = _.orderBy(currentTransactions, [key], [direction]);\n\n      _this.setState({\n        currentTransactions: sortedArray\n      });\n\n      console.log(direction);\n    };\n\n    return _this;\n  }\n\n  _createClass(TransactionList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.fetchTransactions();\n    }\n  }, {\n    key: \"renderTransactions\",\n    value: function renderTransactions() {\n      var currentTransactions = this.state.currentTransactions;\n      return currentTransactions.map(function (_ref) {\n        var date = _ref.date,\n            description = _ref.description,\n            category = _ref.category,\n            amount = _ref.amount,\n            id = _ref.id;\n        return React.createElement(TransactionItem, {\n          date: date,\n          description: description,\n          category: category,\n          amount: amount,\n          key: id,\n          id: id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var totalTransactions = this.props.transactions.length;\n\n      if (totalTransactions === 0) {\n        return React.createElement(Spinner, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        className: \"text-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, totalTransactions), \"\\xA0 Transactions\"), React.createElement(\"table\", {\n        className: \"ui celled table\",\n        style: {\n          marginTop: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        onClick: function onClick() {\n          return _this2.handleSort(\"date\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        onClick: function onClick() {\n          return _this2.handleSort(\"description\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        onClick: function onClick() {\n          return _this2.handleSort(\"category\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Category\"), React.createElement(\"th\", {\n        onClick: function onClick() {\n          return _this2.handleSort(\"amount\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Amount\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, this.renderTransactions())), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        totalRecords: totalTransactions,\n        pageLimit: 10,\n        pageNeighbours: 1,\n        onPageChanged: this.onPageChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return TransactionList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    transactions: Object.values(state.transactions)\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchTransactions: fetchTransactions\n})(requireAuth(TransactionList));","map":{"version":3,"sources":["/Users/kylewiltshire/Documents/projects/2019/Javascript/playground/monten/client/src/components/Transactions/TransactionList.js"],"names":["_","React","Component","connect","TransactionItem","Spinner","fetchTransactions","Pagination","requireAuth","direction","TransactionList","state","currentTransactions","currentPage","totalPages","onPageChanged","data","transactions","props","pageLimit","offset","slice","setState","handleSort","key","changeDirection","sortedArray","orderBy","console","log","map","date","description","category","amount","id","totalTransactions","length","marginTop","renderTransactions","mapStateToProps","Object","values"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport TransactionItem from \"./TransactionItem\";\nimport Spinner from \"../Spinner\";\nimport { fetchTransactions } from \"../../actions\";\nimport Pagination from \"../Pagination\";\nimport requireAuth from \"../../requireAuth\";\n\n// DON'T FORGET TO SPECIFY THIS. WHEN CALLING FUNCTIONS\n\nlet direction = \"asc\";\n\nclass TransactionList extends Component {\n  state = {\n    currentTransactions: [],\n    currentPage: null,\n    totalPages: null\n  };\n\n  componentDidMount() {\n    this.props.fetchTransactions();\n  }\n\n  onPageChanged = data => {\n    const { transactions } = this.props;\n    const { currentPage, totalPages, pageLimit } = data;\n\n    //The offset value indicates the starting index for fetching the records for the current page. Using (currentPage - 1) ensures that the offset is zero-based.\n    const offset = (currentPage - 1) * pageLimit;\n    // We use the Array.prototype.slice() method to extract the required chunk of records from allCountries by passing the offset as the starting index for the slice\n    // and (offset + pageLimit) as the index before which to end the slice.\n    const currentTransactions = transactions.slice(offset, offset + pageLimit);\n\n    this.setState({\n      currentPage,\n      currentTransactions,\n      totalPages\n    });\n  };\n\n  renderTransactions() {\n    const { currentTransactions } = this.state;\n\n    return currentTransactions.map(\n      ({ date, description, category, amount, id }) => {\n        return (\n          <TransactionItem\n            date={date}\n            description={description}\n            category={category}\n            amount={amount}\n            key={id}\n            id={id}\n          />\n        );\n      }\n    );\n  }\n\n  handleSort = key => {\n    const changeDirection = () => {\n      if (direction === \"asc\") {\n        direction = \"desc\";\n      } else if (direction === \"desc\") {\n        direction = \"asc\";\n        return;\n      }\n    };\n\n    changeDirection();\n\n    const { currentTransactions } = this.state;\n    const sortedArray = _.orderBy(currentTransactions, [key], [direction]);\n    this.setState({ currentTransactions: sortedArray });\n    console.log(direction);\n  };\n\n  render() {\n    const totalTransactions = this.props.transactions.length;\n\n    if (totalTransactions === 0) {\n      return <Spinner />;\n    }\n\n    return (\n      <div style={{ marginTop: \"10px\" }}>\n        <h2 style={{ marginTop: \"10px\" }}>\n          <strong className=\"text-secondary\">{totalTransactions}</strong>\n          &nbsp; Transactions\n        </h2>\n        <table className=\"ui celled table\" style={{ marginTop: \"10px\" }}>\n          <thead>\n            <tr>\n              <th onClick={() => this.handleSort(\"date\")}>Date</th>\n              <th onClick={() => this.handleSort(\"description\")}>\n                Description\n              </th>\n              <th onClick={() => this.handleSort(\"category\")}>Category</th>\n              <th onClick={() => this.handleSort(\"amount\")}>Amount</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>{this.renderTransactions()}</tbody>\n        </table>\n        <div>\n          <Pagination\n            totalRecords={totalTransactions}\n            pageLimit={10}\n            pageNeighbours={1}\n            onPageChanged={this.onPageChanged}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    transactions: Object.values(state.transactions)\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchTransactions }\n)(requireAuth(TransactionList));\n"]},"metadata":{},"sourceType":"module"}